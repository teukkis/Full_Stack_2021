(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){'use strict';n.r(t);var a=n(0),u=n.n(a),c=n(13),r=n.n(c),l=n(14),o=n(2),i=n(3),m=n.n(i),d='/api/persons',f=function(){return m.a.get(d)},s=function(e){return m.a.post(d,e)},b=function(e){return m.a.delete(''.concat(d,'/').concat(e))},h=function(e,t){return m.a.put(''.concat(d,'/').concat(e),t)},E=function(e){var t=e.person,n=e.erase;return u.a.createElement('table',null,u.a.createElement('tbody',null,u.a.createElement('tr',null,u.a.createElement('td',null,t.name),u.a.createElement('td',null,t.number),u.a.createElement('td',null,u.a.createElement('button',{onClick:n},'delete')))))},v=function(e){var t=e.valueName,n=e.handleAddName,a=e.handleAddNumber,c=e.valueNumber;return u.a.createElement('div',null,'name: ',u.a.createElement('input',{value:t,onChange:n}),u.a.createElement('br',null),'number: ',u.a.createElement('input',{value:c,onChange:a}))},p=function(e){return e.showPersonList},w=function(e){var t=e.message;return null===t?u.a.createElement('span',null):u.a.createElement('div',{className:'notif'},t)},j=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(''),i=Object(o.a)(r,2),m=i[0],d=i[1],j=Object(a.useState)(''),O=Object(o.a)(j,2),g=O[0],N=O[1],y=Object(a.useState)(''),S=Object(o.a)(y,2),A=S[0],k=S[1],T=Object(a.useState)([]),C=Object(o.a)(T,2),P=C[0],J=C[1],L=Object(a.useState)(!0),q=Object(o.a)(L,2),x=q[0],B=q[1],D=Object(a.useState)(null),I=Object(o.a)(D,2),W=I[0],z=I[1];Object(a.useEffect)(function(){f().then(function(e){c(e.data)})},[]);var F=x?n:P;return u.a.createElement('div',null,u.a.createElement('h2',null,'Phonebook'),u.a.createElement(w,{message:W}),u.a.createElement('form',null,'filter shown with ',u.a.createElement('input',{value:A,onChange:function(e){B(!1),k(e.target.value),J(n.filter(function(t){return t.name.includes(e.target.value,0)})),''===e.target.value&&B(!0)}})),u.a.createElement('h2',null,'Add new'),u.a.createElement('form',{onSubmit:function(e){e.preventDefault();var t=n.find(function(e){return m===e.name});if(void 0===t){var a={name:m,number:g};''!==m&&''!==g?s(a).then(function(e){c(n.concat(e.data)),z(''.concat(a.name,' added')),d(''),N(''),setTimeout(function(){z(null)},3e3)}).catch(function(e){z(''.concat(e.response.data.error)),d(''),N(''),setTimeout(function(){z(null)},6e3)}):window.alert('both name and number are required')}else if(!0===window.confirm(''.concat(t.name,' is already on the list. Would you like to change the number?'))){var u=Object(l.a)({},t,{number:g});h(t.id,u).then(function(e){c(n.map(function(n){return n.id!==t.id?n:e.data})),z('The phone number of '.concat(t.name,' was modified successfully')),d(''),N(''),setTimeout(function(){z(null)},5e3)}).catch(function(e){window.alert(''.concat(e,' occured'))})}}},u.a.createElement(v,{valueName:m,handleAddName:function(e){d(e.target.value)},valueNumber:g,handleAddNumber:function(e){N(e.target.value)}}),u.a.createElement('div',null,u.a.createElement('button',{type:'submit'},'Add'))),u.a.createElement('h2',null,'Numbers'),u.a.createElement(p,{showPersonList:F.map(function(e){return u.a.createElement(E,{key:e.id,person:e,erase:function(){return function(e){var t=n.filter(function(t){return t.id===e});b(e).then(function(a){c(n.filter(function(t){return t.id!==e})),z(''.concat(t[0].name,' deleted')),setTimeout(function(){z(null)},5e3)}).catch(function(e){z('All information about '.concat(t[0].name,' has been deleted already')),setTimeout(function(){z(null)},5e3)})}(e.id)}})})}))};n(39);r.a.render(u.a.createElement(j,null),document.getElementById('root'))}},[[15,1,2]]])
//# sourceMappingURL=main.91ba3b9d.chunk.js.map